---
title: JavaScript 语法
date: 2020-12-25 14:27:01
permalink: /pages/faee3dddwsee
author: 
  name: jeffery
categories: 
  - javascript
tags: 
  - javascript
---

# JavaScript 语法

## 语句

`JavaScript` 程序的执行单位为行（line），也就是一行一行地执行。一般情况下，每一行就是一个语句。

代码示例：
```js
var a = 1 + 3;
```

语句和表达式的区别：语句主要为了进行某种操作，一般情况下不需要返回值，例如 `var a = 1 + 3;` 是赋值语句；表达式则是为了得到返回值，例如 `1 + 3` 是表达式（expression），计算返回值是 3。

语句以分号结尾，一个分号就表示一个语句结束。多个语句可以写在一行内。
```js
var a = 1 + 3 ; var b = 'abc';
```

表达式不需要分号结尾。一旦在表达式后面添加分号，则 `JavaScript` 引擎就将表达式视为语句，这样会产生一些没有任何意义的语句。
```js
1 + 3;
'abc';
```
上面两行语句只是单纯地产生一个值，并没有任何实际的意义。

## 变量

变量的名字又叫做 **标识符**，必须以数字、字母、下划线（`_`）或者美元符号（`$`）开头，变量用于存储数据值，访问这个变量等同于引用这个值。

::: warning
注意，JavaScript 的变量名区分大小写，A和a是两个不同的变量。
:::

### 变量的声明

JavaScript 有三种声明方式：  

* `var` 声明一个变量，可赋一个初始值。   
* `let` 声明一个块作用域的局部变量，可赋一个初始值。  
* `const` 声明一个块作用域的只读命名的常量，对象类型可以修改属性。   


**注意**：   

* 若没有为变量赋初始值，则值默认为`undefined`；  
```js
let a;
console.log(a);   // undefined
```

* 若没有声明变量而直接使用，会抛出`ReferenceError`错误；   
```js
console.log(b);   // Uncaught ReferenceError: b is not defined
```

* 当变量值为`undefined`时，布尔值环境会当做`false`，数值环境会当做`NaN`；   
```js
var a;
if(!a){
    console.log('a为undefined'); // a为undefined
}
a + 1;  // NaN
```

* 当变量值为`null`时，布尔值环境会当做`false`，数值环境会当做`0`；  
```js
let a = null;
if(!a){
    console.log('a为unll'); // a为unll
}
a + 1;  // 1
```

### 变量作用域

变量作用域是变量可以被访问到的范围，变量作用域分为全局作用域、局部作用域和块级作用域

**全局变量**：即声明在函数之外，当前文档所有地方都可以访问；   
**局部变量**：即声明在函数内部，仅在当前函数内可以访问；   
**块级作用域**：即在花括号使用 `let`、`const` 声明的变量
 
```js
if(true){
    var a = 1;
}
a; // 1

if(true){
    let b = 2;
}
b; // ReferenceError: b is not defined
```

### 变量提升

JavaScript 引擎的工作方式是，先解析代码，获取所有被声明的变量，然后再一行一行地运行。如果解析过程中遇到 `var`、`function` 声明，将声明的变量提升到函数或语句的顶部，这叫做变量提升（hoisting）和函数提升
   
::: warning
函数提升优先于变量提升
:::

```js
// ES5及之前
console.log(a);   // undefined，变量提升
var a = 1;
console.log(a);   // 1

// ES6开始
console.log(b);   // Uncaught ReferenceError: b1 is not defined
let b = 2;
console.log(b);   // 2
```

### 全局变量

全局变量默认是全局对象（`window`）的属性，常常使用`window.variable`语法来设置和访问全局变量。   

* **ES5之中**，顶层对象的属性等价于全局变量（浏览器环境中顶层对象是`window`，Node中是`global`对象）；  
* **ES6之中**，`var`/`function`声明的全局变量，依然是顶层对象的属性，但是`let`/`const`/`class`声明的变量不属于顶层对象的属性，即ES6开始，全局变量和顶层对象的属性是分开的。 
       
```js
// ES5
var a = 'leo';
window.a; // 'leo'

// ES6
let b = 'leo';
window.b; // undefined
```

### 常量

ES6之后我们可以使用`const`来声明一个只读的常量，并且在**声明时必须赋值**，之后在相同作用域中**不能赋值**也**不能重新声明**，否则报错。   
```js
const a;   
// Uncaught SyntaxError: Missing initializer in const declaration

const b = 'leo';
b = 'hi';
// Uncaught TypeError: Assignment to constant variable.

function f(){
    const a1 = 'hi';
    console.log(a1);
}
f(); // 'hi'
const a1 = 'hi leo';
a1; // "hi leo"
```

尽管`const`声明的变量不能直接修改值，但是对于对象和数组，却是不受保护可以修改的：  
```js
const a = {name:'leo',age:25};
a.name = 'pingan'; // a => {name: "pingan", age: 25}

const b = ['hi', 'leo'];
b[1] = 'pingan';   // b => ["hi", "pingan"]
```

## 注释

JavaScript 提供两种注释的写法：一种是单行注释，用`//`起头；另一种是多行注释，放在`/*`和`*/`之间。
```js
// 这是单行注释

/*
 这是
 多行
 注释
*/
```

## 条件语句

JavaScript 提供 `if` 结构和 `switch` 结构，完成条件判断，即只有满足预设的条件，才会执行相应的语句。

### if 结构

```js
if (布尔值)
  语句;

// 或者
if (布尔值) 语句;
```

### if...else 结构

```js
if (m === 3) {
  // 满足条件时，执行的语句
} else {
  // 不满足条件时，执行的语句
}
```

### switch 结构

多个if...else连在一起使用的时候，可以转为使用更方便的switch结构。
```js
switch (fruit) {
  case "banana":
    // ...
    break;
  case "apple":
    // ...
    break;
  default:
    // ...
}
```
::: warning
- 需要注意的是，每个case代码块内部的break语句不能少，否则会接下去执行下一个case代码块，而不是跳出switch结构。
- switch语句后面的表达式，与case语句后面的表示式比较运行结果时，采用的是严格相等运算符（===），而不是相等运算符（==），这意味着比较时不会发生类型转换
:::

### 三元运算符 ?:

```js
(条件) ? 表达式1 : 表达式2

var even = (n % 2 === 0) ? true : false;
```

## 循环语句

循环语句用于重复执行某个操作，它有多种形式。

### while 循环

While语句包括一个循环条件和一段代码块，只要条件为真，就不断循环执行代码块。
```js
while (条件)
  语句;

// 或者
while (条件) 语句;
```

### for 循环

for语句是循环命令的另一种形式，可以指定循环的起点、终点和终止条件
```js
for (初始化表达式; 条件; 递增表达式)
  语句

// 或者

for (初始化表达式; 条件; 递增表达式) {
  语句
}
```
for语句后面的括号里面，有三个表达式。

- 初始化表达式（initialize）：确定循环变量的初始值，只在循环开始时执行一次。
- 条件表达式（test）：每轮循环开始时，都要执行这个条件表达式，只有值为真，才继续进行循环。
- 递增表达式（increment）：每轮循环的最后一个操作，通常用来递增循环变量。

### do...while 循环

do...while循环与while循环类似，唯一的区别就是先运行一次循环体，然后判断循环条件
```js
do
  语句
while (条件);

// 或者
do {
  语句
} while (条件);
```

## break 语句和 continue 语句

break语句和continue语句都具有跳转作用，可以让代码不按既有的顺序执行。

break语句用于跳出代码块或循环。

```js
var i = 0;

while(i < 100) {
  console.log('i 当前为：' + i);
  i++;
  if (i === 10) break;
}
```
上面代码只会执行10次循环，一旦i等于10，就会跳出循环

continue语句用于立即终止本轮循环，返回循环结构的头部，开始下一轮循环。
```js
var i = 0;

while (i < 100){
  i++;
  if (i % 2 === 0) continue;
  console.log('i 当前为：' + i);
}
```
上面代码只有在i为奇数时，才会输出i的值。如果i为偶数，则直接进入下一轮循环

