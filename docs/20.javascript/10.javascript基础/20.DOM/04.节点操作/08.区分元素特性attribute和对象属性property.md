---
title: 区分元素特性attribute和对象属性property
date: 2021-04-02 19:03:01
permalink: /pages/sdeeaesweew
author: 
  name: jeffery
categories: 
  - javascript
tags: 
  - javascript
---

# 区分元素特性attribute和对象属性property

`attribute` 和 `property` 两个单词，翻译出来都是属性，但是《javascript高级程序设计》将它们翻译为特性和属性，以示区分。

## 定义

元素特性 `attribute` 是指 `HTML` 元素标签的特性

下面的 `id`、`class`、`title`、`a` 都是特性，其中 `a`叫做自定义特性

```html
<div id="id1" class="class1" title="title1" a='a1'></div>
```

对象属性 `property` 是指元素节点的属性

下面的 `id`、`title`、`b` 都是属性，其中 `b` 叫做自定义属性

```html
<div id="test"></div>
<script>
test.id = 'id2';
test.title = 'title2';
test.b = 'b2';
</script>
```
## 共有

`id`、`title`等既是属性，也是特性。修改属性，其对应的特性会发生改变；修改特性，属性也会改变

【1】修改元素特性(以title为例)

```html
<div id="test" title='123'>测试内容</div>
<script>
console.log(test.title);//123
document.onclick = function(){
    test.setAttribute('title','456');
    console.log(test.title);//456    
}
</script>
```

【2】修改对象属性

```html
<div id="test" title='123'>测试内容</div>
<script>
console.log(test.getAttribute('title'));//123
document.onclick = function(){
    test.title = '456';
    console.log(test.getAttribute('title'));//456    
}
</script>
```
## 例外

`class` 和 `for` 这两个元素特性是例外，因为 `class` 和 `for` 是保留字，无法直接在对象属性中使用。所以在对象属性中，`class` 变成了 `className` ，而 `for` 变成了 `htmlFor`

【1】class

```html
<div id="test" class="class1">测试内容</div>
<script>
console.log(test.getAttribute('class'));//'class1'
console.log(test.className);//'class1'
console.log(test.class);//undefined
</script>
```

【2】for

```html
<label id="test" for="input"></label>
<script>
console.log(test.getAttribute('for'));//'input'
console.log(test.htmlFor);//'input'
console.log(test.for);//undefined
</script>
```
## 特殊

`style` 和 `onclick` 是两个特殊的特性，它们虽然有对应的属性名，但属性值与通过 `getAttribute()` 返回的值并不相同

【1】style

通过 `getAttribute()` 访问时，返回的 `style` 特性值中包含的是 `CSS` 文本，而通过属性来访问它则会返回一个`CSSStyleDeclaration`对象

```html
<div id="test" style="height: 100px;width: 100px;"></div>
<script>
console.log(test.getAttribute('style'));//'height: 100px;width: 100px;'
//{0: "height", 1: "width", alignContent: "", alignItems: "", alignSelf: ""…}
console.log(test.style);
console.log(typeof test.style);//'object'
console.log(test.style.height);//'100px'
</script>
```

【2】onclick

如果通过 `getAttribute()` 访问，会返回相应代码的字符串。而访问 `onclick` 属性时，会返回一个 `javascript` 函数

[注意]其他事件处理程序也类似

```html
<div id="test" onclick = "alert(1)">测试内容</div>
<script>    
console.log(test.getAttribute('onclick'));//'alert(1)'
console.log(test.onclick);//'function onclick(event) {alert(1)}'
console.log(typeof test.onclick);//'function'
</script>
```

[注意]如果通过对象属性设置 `onclick` 属性，则不会有对应的元素特性

```html
<div id="test">测试内容</div>
<script>
test.onclick = function(){
    alert(1);
}    
console.log(test.getAttribute('onclick'));//null
console.log(test.onclick);//'function onclick(event) {alert(1)}'
console.log(typeof test.onclick);//'function'
</script>
```

## 自定义

【1】自定义特性

自定义特性用来在 `HTML` 元素上绑定一些额外的信息。但是自定义特性无法在对象属性中有所体现

```html
<div id="test" index='1'></div>
<script>
console.log(test.getAttribute('index'));//'1'
console.log(test.index);//undefined    
</script>
```

`HTML5` 新增了数据集属性 `dataset`(规范的自定义特性)，用于存储页面或应用程序的私有定制数据。数据集属性以`'data-'`为前缀，可以使用 `javascript` 中对象属性 `dataset` 访问 `data-*` 的值

由于元素特性的值以'-'做间隔，在对象属性中将转换为首字母大写的形式

```js
data-index-one -> dataset.indexOne
```

所以，元素特性的值一定不要出现大写，否则对象属性会解释出错

[注意]IE10-浏览器不支持dataset

```html
<div id="test" data-index-one="1"></div>
<script>
console.log(test.getAttribute('data-index-one'));//'1'
console.log(test['data-index-one']);//undefined
console.log(test.dataset.indexOne);//'1'
</script>
```

【兼容代码】

```js
function getDataSet(element){
    if(element.dataset){
        return element.dataset;
    }
    var attrs= element.attributes;
    var len = attrs.length;
    var data = {};
    for(var i=0;i<len;i++){
        var sName = attrs[i].name;
        var sValue = attrs[i].value;
        if(sName.substring(0,5)==="data-"){
            var tempName = sName.slice(5).replace(/-([A-Za-z])/g,function(item,item1){
                return item1.toUpperCase();
            });
            data[tempName] = sValue;
        }   
    }
    return data;
}
var dataset = getDataSet(box);
```

【2】自定义属性

自定义属性在 `javascript` 中非常常用，是一种常用的编程技术。但元素特性上并不会有所体现

```html
<div id="test"></div>
<script>
test.index = 1;
console.log(test.index);//1
console.log(test.getAttribute('index'));//null
</script>
```

[注意]可以使用数据集属性的逆向操作来实现自定义属性向元素特性的对应 

```html
<div id="test"></div>
<script>
test.dataset.index = 1;
console.log(test.getAttribute('data-index'));//1
</script>
```

## 总结

对象节点对于 `HTML` 标签元素说来，是元素 `DOM` 化的结果。与此相对应，对象属性也是元素特性的 `DOM` 化结果

由于 `javascript` 中保留字的限制，存在 `class` 和 `for` 这两种例外情况

与普通的元素特性不同，通过 `style` 实现的脚本化 `CSS` 机制和通过 `onclick` 等实现的事件处理机制是 `DOM` 的两大功能，它们被 `DOM` 实现为对象，而不仅仅是普通的字符串

自定义特性和自定义属性非常有用，但却没有对应关系。`HTML5` 新增的数据集属性 `dataset` 建立了两者的联系
