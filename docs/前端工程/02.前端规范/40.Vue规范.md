---
title: Vue 开发规范
date: 2020-07-21 14:38:19
permalink: /pages/atdwwrrr34d
categories: 
  - 前端工程
tags: 
  - 前端工程
  - 规范
  - Vue
---

# Vue 开发规范

## 规范目的

- 减少代码运行出错，避免重复踩坑
- 产出统一且高质量的前端代码，降低后期维护的成本
- 提高团队协作效率
- 提高项目扩展性

## 命名规范

为了让大家编写可维护易扩展的代码 让团队中的所有人编写风格统一，其他人看你的代码能轻易读懂
### 组件命名规范

**有意义，能描述实际功能的单词或短语**

组件名应该倾向于完整单词而不是缩写

**组件名称单词大写开头，大驼峰命名**

```js
name: 'MyComponent'
```

**组件名为多个单词**

组件名应该始终是多个单词的，根组件 `App` 以及 `<transition>`、`<component>` 之类的 `Vue` 内置组件除外。

这样做可以避免跟现有的以及未来的 `HTML` 元素**相冲突**，因为所有的 `HTML` 元素名称都是单个单词的。

```js
Vue.component('todo-item', {
  // ...
})

// 或
export default {
  name: 'TodoItem',
  // ...
}
```

**文件名称和组件的 name 一样**

这样做有利于开发工具，调试和定位到需要修改的文件组件

**公共组件库统一使用公司名开头**

**基础组件名，以一个特定的前缀开头，比如 `Base`、`App` 或 `V`**

**父组件紧密耦合的子组件应该以父组件名作为前缀命名**

**组件名不能使用保留字**

**组件名应该以高级别的 (通常是一般化描述的) 单词开头，以描述性的修饰词结尾**

### 普通变量命名

- 小驼峰命名
- 命名必须与内容相关
- 复数的时候加 `s`

### 常量命名

- 命名方法 : 全部大写
- 命名规范 : 使用大写字母和下划线来组合命名，下划线用以分割单词

```js
const MAX_COUNT = 10
const URL = 'https://www.baidu.com/'
```


### views文件夹下的文件命名

- 小驼峰命名
- 尽量使用名词
- 名字至少两个单词（`good: workbenchIndex`）（`bad:workbench`）
- 开头的单词就是所属模块名字（`workbenchIndex`、`workbenchList`、`workbenchEdit`）

### props命名
- 小驼峰命名
- 小写单词+连字符 `-` 的方式使用


### method命名

- 小驼峰命名
- 动词 + 名词
- 获取数据以 `data` 结尾
- `init`、`refresh`例外
- 使用常见单词

常用单词表

| 名称      | 说明 | 名称       | 说明 | 名称     | 说明 | 名称        | 说明   |
| --------- | ---- | ---------- | ---- | -------- | ---- | ----------- | ------ |
| get       | 获取 | set        | 设置 | add      | 增加 | remove      | 删除   |
| create    | 创建 | destory    | 销毁 | start    | 启动 | stop        | 停止   |
| open      | 打开 | close      | 关闭 | read     | 读取 | write       | 写入   |
| load      | 载入 | save       | 保存 | backup   | 备份 | restore     | 恢复   |
| import    | 导入 | export     | 导出 | split    | 分割 | merge       | 合并   |
| inject    | 注入 | extract    | 提取 | attach   | 附着 | detach      | 脱离   |
| bind      | 绑定 | separate   | 分离 | view     | 查看 | browse      | 浏览   |
| edit      | 编辑 | modify     | 修改 | select   | 选取 | mark        | 标记   |
| copy      | 复制 | paste      | 粘贴 | undo     | 撤销 | redo        | 重做   |
| insert    | 插入 | delete     | 移除 | add      | 加入 | append      | 添加   |
| clean     | 清理 | clear      | 清除 | index    | 索引 | sort        | 排序   |
| find      | 查找 | search     | 搜索 | increase | 增加 | decrease    | 减少   |
| play      | 播放 | pause      | 暂停 | launch   | 启动 | run         | 运行   |
| compile   | 编译 | execute    | 执行 | debug    | 调试 | trace       | 跟踪   |
| observe   | 观察 | listen     | 监听 | build    | 构建 | publish     | 发布   |
| input     | 输入 | output     | 输出 | encode   | 编码 | decode      | 解码   |
| encrypt   | 加密 | decrypt    | 解密 | compress | 压缩 | decompress  | 解压缩 |
| pack      | 打包 | unpack     | 解包 | parse    | 解析 | emit        | 生成   |
| connect   | 连接 | disconnect | 断开 | send     | 发送 | receive     | 接收   |
| download  | 下载 | upload     | 上传 | refresh  | 刷新 | synchronize | 同步   |
| update    | 更新 | revert     | 复原 | lock     | 锁定 | unlock      | 解锁   |
| check out | 签出 | check in   | 签入 | submit   | 提交 | commit      | 交付   |
| push      | 推   | pull       | 拉   | expand   | 展开 | collapse    | 折叠   |
| begin     | 开始 | end        | 结束 | start    | 开始 | finish      | 完成   |
| enter     | 进入 | exit       | 退出 | abort    | 放弃 | quit        | 离开   |
| obsolete  | 废弃 | depreciate | 废旧 | collect  | 收集 | aggregate   | 聚集   |


## 结构化规范

### 目录结构

- 全局文件文件均以 `index.js` 导出，并在 `main.js` 中导入
- 统一管理处均对应相应模块
- 临时文件上线前视情况保留

详见各框架说明

```
src                               源码目录
|-- api                              接口，统一管理
|-- assets                           静态资源，统一管理
|-- components                       公用组件，全局文件
|-- filters                          过滤器，全局工具
|-- icons                            图标，全局资源
|-- datas                            模拟数据，临时存放
|-- lib                              外部引用的插件存放及修改文件
|-- mock                             模拟接口，临时存放
|-- router                           路由，统一管理
|-- store                            vuex, 统一管理
|-- views                         视图目录
|   |-- staffWorkbench               视图模块名
|   |-- |-- staffWorkbench.vue       模块入口页面
|   |-- |-- indexComponents          模块页面级组件文件夹
|   |-- |-- components               模块通用组件文件夹
```

### vue文件结构

- 必须有 `name` 属性且与文件名相同
- 必须有 `template` 标签
- 必须有 `script` 标签且含有`export default {}`
- 组件对象顺序

**vue 文件基本结构**

```html
<template lang="html">
  <div class="Ranger__Wrapper">
    <!-- ... -->
  </div>
</template>

<script type="text/javascript">
  export default {
    // 不要忘记了 name 属性
    name: 'RangeSlider',
    // 使用组件 mixins 共享通用功能
    mixins: [],
    // 组成新的组件
    extends: {},
    // 组件属性、变量
    props: {
      bar: {}, // 按字母顺序
      foo: {},
      fooBar: {},
    },
    // 变量
    data() {},
    computed: {},
    // 使用其它组件
    components: {},
    // 方法
    watch: {},
    methods: {},
    // 生命周期函数
    beforeCreate() {},
    mounted() {},
  };
</script>

<style scoped>
  .Ranger__Wrapper { /* ... */ }
</style>
```
### 属性结构规范

**多个特性的元素应该分多行撰写，每个特性一行。(增强更易读)**

```html
<!-- bad -->
<img src="https://vuejs.org/images/logo.png" alt="Vue Logo">
<my-component foo="a" bar="b" baz="c"></my-component>

<!-- good -->
<img
  src="https://vuejs.org/images/logo.png"
  alt="Vue Logo"
>
<my-component
  foo="a"
  bar="b"
  baz="c"
>
</my-component>

```

**组件选项顺序**

```javascript
components
props
filter
data
computed
watch
created
mounted
metods
```

**属性顺序：原生属性放前面，指令放后面**

```javascript
class
id,ref
name
data-*
src, for, type, href,value,max-length,max,min,pattern
title, alt，placeholder
aria-*, role
required,readonly,disabled
is
v-for
key
v-if
v-else-if
v-else
v-show
v-cloak
v-pre
v-once
v-model
v-bind,:
v-on,@
v-html
v-text
```

## 注释规范

代码注释在一个项目的后期维护中显的尤为重要，所以我们要为每一个被复用的组件编写组件使用说明，为组件中每一个方法编写方法说明

### 注释原则

- 代码本身就是最好的注释，编码命名要通俗易懂
- 减少冗余的注释
### 必须添加的注释


- 公共组件的使用说明，必要时可以附带 `md` 文档
- 组件中的核心、重要函数
- 复杂业务逻辑
- 多重判断、选择
- 特殊情况的代码处理说明
- 修复的 `bug`，容易踩坑的地方要增加注释

### 单行注释

- 单独一行，不要写到代码后面
- 使用 `//` 且后面跟一个空格

```javascript
  //---- bad -----

  var name =”abc”; // 姓名    

  // ----- good -----

  // 姓名
  var name = “abc”; 
```

### 多行注释

- 使用 `/**开头，**/` 结尾，每一行开头都要有 `*`
- 包含名称、描述、参数、返回值、作者、时间、版本等相关信息，适当省略


```javascript
/**
 * @functionName localSave
 * @param {String} key 数据的key
 * @param {String} value 数据的value
 * @description 在localStorage存储数据
 * @author jeff
 * @date 2021-03-18 12:21:36
 * @version V1.0.0
 */
 
 /**
 * @functionName localRead
 * @param {String} key 获取数据的key
 * @return {String} 返回查询结果，未找到时返回结果为''（空字符串）
 * @description 根据key获取localStorage的数据
 * @author jeffer
 * @date 2021-03-18 12:23:56
 * @version V1.0.0
 */
```

- component

```js
组件使用说明，和调用说明
      /**
      * 组件名称
      * @module 组件存放位置
      * @desc 组件描述
      * @author 组件作者
      * @date 2021年07月05日17:22:43
      * @param {Object} [title]    - 参数说明
      * @param {String} [columns] - 参数说明
      * @example 调用示例
      *  <hbTable :title="title" :columns="columns" :tableData="tableData"></hbTable>
      **/
```

## Vue 编码规范

优秀的项目源码，即使是多人开发，看代码也如出一人之手。统一的编码规范，可使代码更易于阅读，易于理解，易于维护。尽量按照 `ESLint` 格式要求编写代码
### 组件数据

组件的 `data` 必须是一个函数，这样做利于组件复用，避免对象引用的关系出现数据污染

`root` 根组件允许为对象

```js
Vue.component('some-comp', {
  data: function () { // 函数作用域，复用
    return {
      foo: 'bar'
    }
  }
})
```

### prop 规范

`prop` 定义应该尽量详细，指定其类型，好处：

- 写明了组件的 `API`，所以很容易看懂组件的用法；
- 在开发环境下，如果向一个组件提供格式不正确的 `prop`，`Vue` 将会告警，以帮助你捕获潜在的错误来源。

```js
// 更好的做法！
props: {
  status: {
    type: String,
    required: true,
    validator: function (value) {
      return [
        'syncing',
        'synced',
        'version-conflict',
        'error'
      ].indexOf(value) !== -1
    }
  }
}
```


### 为 `v-for` 设置键值 `key` 

`Vue` 就地复用元素，在删除和更新元素时，使用`key`避免更新出错，同时利于虚拟 `DOM` 进行 `diff` 对比

```js
<ul>
  <li
    v-for="todo in todos"
    :key="todo.id"
  >
    {{ todo.text }}
  </li>
</ul>
```

### 避免 v-if 和 v-for 用在一起

`v-for` 比 `v-if` 具有更高的优先级，每次循环会进行条件的判断，损耗性能

解决办法，不能再同一个元素上

- 使用  `computed` 处理原始数据，过滤返回显示的列表
- `v-if`放到父级元素上

```js
<ul v-if="shouldShowUsers">
  <li
    v-for="user in users"
    :key="user.id"
  >
    {{ user.name }}
  </li>
</ul>
```

### 为组件样式设置作用域

设置作用域，避免全局样式污染

```html
<template>
  <button class="button button-close">X</button>
</template>

<!-- 使用 `scoped` attribute -->
<style scoped>
.button {
  border: none;
  border-radius: 2px;
}

.button-close {
  background-color: red;
}
</style>
```
### 指令规范

- 指令使用缩写形式

  - `v-bind:class` => `:class`
  - `v-on:click` => `@click`

### 其他

- `console`、`debugger` 使用完及时删除
- 应该把复杂计算属性分割为尽可能多的更简单的 `property`
- 如果一组 `v-if` + `v-else` 的元素类型相同，最好使用 `key`
- 在 `scoped` 样式中，类选择器比元素选择器更好，因为大量使用元素选择器是很慢的
- 应该优先通过 `prop` 和事件进行父子组件之间的通信，而不是 `this.$parent` 或变更 `prop`
- 组件模板应该只包含简单的表达式，复杂的表达式则应该重构为计算属性或方法

## es6规范

- 常量`const`
- 变量`let`
- 字符串使用单引号
- 动态字符串使用字符串模板（反引号，`${}`）
- 使用解构赋值处理对象、数组的赋值
- 函数的参数要有默认值
- 使用解构赋值处理对象类型的函数参数
- 使用箭头函数
- 模块导出
  - 一个输出使用 `export default`
  - 多个输出使用 `export const name`


## css规范

### 通用规范

- `class` 命名
  - 统一使用 `-` 连字符
  - 使用小写字母
  - 语义明确且与内容相关
- 省略值为 `0` 时的单位
- `css` 可以实现就不用 `js`
- 优先使用缩写属性，提高可读性，特殊情况除外
- 声明顺序
  - 显示属性 `display`、`visibility`、`position`、`float`、`clear`...
  - 自身属性 `width`、`height`、`margin`、`padding`、`border`、`overflow`...
  - 其他属性 `font`、`text-align`、`vertical-align`、`color`、`background`...
- 避免在 `scoped` 中使用元素选择器

### sass规范

- 嵌套属性顺序
  - 当前选择器的样式属性
  - 父级选择器的伪类选择器
  - 伪类元素
  - 父级选择器的声明样式
  - 媒体查询
  - 子选择器

### 其他

- 组件内部使用局部样式`scoped`
- 公共组件、全局组件库使用 `BEM`

## 拓展阅读

- [Vue官方-风格指南](https://cn.vuejs.org/v2/style-guide/)
- [Vue.js 组件编码规范](https://pablohpsilva.github.io/vuejs-component-style-guide/#/chinese)
