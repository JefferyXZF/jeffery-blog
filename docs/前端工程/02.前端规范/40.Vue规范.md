---
title: Vue 规范
date: 2020-07-21 14:38:19
permalink: /pages/atdwwrrr34d
categories: 
  - 前端工程
tags: 
  - 前端工程
  - 规范
  - Vue
---

# Vue 规范

制定 `Vue` 开发规范，主要有以下几个目的：

- 减少代码运行出现未知的错误，避免重复踩坑
- 提高代码的运行性能
- 增强代码可读性，利于项目的可维护、可拓展
- 倡导一致的开发规范，利于团队的沟通交流和开发协助

开发规范按照等级划分为三个等级：`A` 等级、`B` 等级、`C` 等级

## A 等级

`A` 等级是强制必须遵守的规范，如果不遵守有可能会出错

### 组件名为多个单词

组件名应该始终是多个单词的，根组件 `App` 以及 `<transition>`、`<component>` 之类的 `Vue` 内置组件除外。

这样做可以避免跟现有的以及未来的 `HTML` 元素**相冲突**，因为所有的 `HTML` 元素名称都是单个单词的。

```js
Vue.component('todo-item', {
  // ...
})

// 或
export default {
  name: 'TodoItem',
  // ...
}
```

### 组件数据

组件的 `data` 必须是一个函数，这样做利于组件复用，避免对象引用的关系出现数据污染

`root` 根组件允许为对象

```js
Vue.component('some-comp', {
  data: function () { // 函数作用域，复用
    return {
      foo: 'bar'
    }
  }
})
```

### prop 定义

`prop` 定义应该尽量详细，指定其类型，好处：

- 写明了组件的 `API`，所以很容易看懂组件的用法；
- 在开发环境下，如果向一个组件提供格式不正确的 `prop`，`Vue` 将会告警，以帮助你捕获潜在的错误来源。

```js
// 更好的做法！
props: {
  status: {
    type: String,
    required: true,
    validator: function (value) {
      return [
        'syncing',
        'synced',
        'version-conflict',
        'error'
      ].indexOf(value) !== -1
    }
  }
}
```


### 为 `v-for` 设置键值 `key` 

`Vue` 就地复用元素，在删除和更新元素时，使用`key`避免更新出错，同时利于虚拟 `DOM` 进行 `diff` 对比

```js
<ul>
  <li
    v-for="todo in todos"
    :key="todo.id"
  >
    {{ todo.text }}
  </li>
</ul>
```

### 避免 v-if 和 v-for 用在一起

`v-for` 比 `v-if` 具有更高的优先级，每次循环会进行条件的判断，损耗性能

解决办法

- 使用  `computed` 计算，过滤返回显示的列表
- 在外围将 `v-if` 用 `template` 模板包裹渲染

```js
<ul v-if="shouldShowUsers">
  <li
    v-for="user in users"
    :key="user.id"
  >
    {{ user.name }}
  </li>
</ul>
```

### 为组件样式设置作用域

设置作用域，避免全局样式污染

```html
<template>
  <button class="button button-close">X</button>
</template>

<!-- 使用 `scoped` attribute -->
<style scoped>
.button {
  border: none;
  border-radius: 2px;
}

.button-close {
  background-color: red;
}
</style>
```


## 强烈推荐

### 文件名称和组件的name一样

这样做有利于调试和定位到需要修改的组件


### 其他

- 组件模板应该只包含简单的表达式，复杂的表达式则应该重构为计算属性或方法
- 组件没有包裹内容，使用自闭合，减少编译和入栈的步骤
- 组件名称单词大写开头，大驼峰命名
- 基础组件名，以一个特定的前缀开头，比如 `Base`、`App` 或 `V`
- 和父组件紧密耦合的子组件应该以父组件名作为前缀命名
- 组件名应该以高级别的 (通常是一般化描述的) 单词开头，以描述性的修饰词结尾
- 组件名应该倾向于完整单词而不是缩写
- `prop` 命名应该始终使用 `camelCase`
- 多个 `attribute` 的元素应该分多行撰写，每个 `attribute` 一行
- 应该把复杂计算属性分割为尽可能多的更简单的 property
- 如果一组 `v-if` + `v-else` 的元素类型相同，最好使用 `key`
- 在 `scoped` 样式中，类选择器比元素选择器更好，因为大量使用元素选择器是很慢的
- 应该优先通过 `prop` 和事件进行父子组件之间的通信，而不是 `this.$parent` 或变更 `prop`



## 推荐



## 参考文档

- [Vue官方-风格指南](https://cn.vuejs.org/v2/style-guide/)
- http://www.demigods.top/views/Framework/common/vueRule.html#%E8%A7%84%E8%8C%83%E7%9B%AE%E7%9A%84
- https://juejin.cn/post/6844903652096770055
- http://caibaojian.com/vue-style.html
- https://github.com/pablohpsilva/vuejs-component-style-guide/blob/master/README-CN.md
- https://pablohpsilva.github.io/vuejs-component-style-guide/#/chinese
- https://blog.csdn.net/houyibing930920/article/details/112800690
- https://blog.csdn.net/longlc123/article/details/109642479