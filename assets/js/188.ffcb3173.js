(window.webpackJsonp=window.webpackJsonp||[]).push([[188],{621:function(s,n,e){"use strict";e.r(n);var a=e(11),t=Object(a.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"vue-优化技术"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue-优化技术"}},[s._v("#")]),s._v(" Vue 优化技术")]),s._v(" "),e("h2",{attrs:{id:"_1-长列表性能优化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-长列表性能优化"}},[s._v("#")]),s._v(" 1. 长列表性能优化")]),s._v(" "),e("p",[s._v("在2.x版本中"),e("code",[s._v("Vue")]),s._v("会通过"),e("code",[s._v("Object.defineProperty")]),s._v("对数据进行劫持, 以实现双向数据绑定. 但在一些特定的业务场景, 组件只需要进行纯数据展示, 不会有任何变化, 此时我们可能不需要"),e("code",[s._v("Vue")]),s._v("对来数据进行劫持. 在大量数据需要进行呈现时, 如果禁止"),e("code",[s._v("Vue")]),s._v("对数据进行劫持, 会明显减少组件初始化的时间.")]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("通过`Object.freeze`方法冻结对象, **对象一旦被冻结就不能再被修改了.** :::")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('export default {\n  data: () => ({\n    userList: []\n  }),\n  async created() {\n    const userList = await this.$service.get("/getuserList");\n    this.userList = Object.freeze(userList);\n  }\n};\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("h2",{attrs:{id:"_2-vue组件渲染性能分析"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-vue组件渲染性能分析"}},[s._v("#")]),s._v(" 2. Vue组件渲染性能分析")]),s._v(" "),e("p",[s._v("基于上面的案例("),e("code",[s._v("长列表性能优化")]),s._v("), 可以通过"),e("code",[s._v("Object.freeze")]),s._v("来实现纯呈现的列表性能优化, 那如何来确认呢?")]),s._v(" "),e("p",[s._v("我们可以通过Chrome Devtools来检测. 但为了获得准确的性能分析数据, 我们需要开启Vue应用的性能模式.")]),s._v(" "),e("h3",{attrs:{id:"开启vue性能模式-适用于开发模式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开启vue性能模式-适用于开发模式"}},[s._v("#")]),s._v(" 开启Vue性能模式(适用于开发模式)")]),s._v(" "),e("p",[s._v("在工程中的"),e("code",[s._v("main.js")]),s._v("中(Vue根实例初始化之前), 添加以下代码:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("Vue.config.performance = true;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("当然, 你也可以根据需要对当前环境进行判断, 来决定是否开启性能模式.")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('const isDev = process.env.NODE_ENV !== "production";\nVue.config.performance = isDev;\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("这样, 将会激活Vue在内部用于标记组件性能的 Timing API. 如下图所示:")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/9/11/16d20c993a253265?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"images.png"}})]),s._v(" "),e("p",[s._v("假设, 此时我们创建好了一个demo工程, 并有一个"),e("code",[s._v("Hello.vue")]),s._v("的组件, 用于验证长列表渲染性能问题. 运行本地工程后, 打开浏览器到指定路由(确认有加载"),e("code",[s._v("Hello.vue")]),s._v('组件). 打开控制台, 并点击"reload"按钮, 如下图所示:')]),s._v(" "),e("p",[e("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/9/11/16d20c9a6ccd4af5?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"images.png"}})]),s._v(" "),e("p",[s._v("此时, 将会记录页面性能. 因为已经在main.js上添加了Vue.config.performance设置，此时你将能够在分析中看到时序部分. 如下图所示.")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/9/11/16d20c9a70b09f36?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"images.png"}})]),s._v(" "),e("p",[s._v("此时, 你会发现这里有3个指标:")]),s._v(" "),e("ul",[e("li",[s._v("init, 创建组件实例所花费的时间")]),s._v(" "),e("li",[s._v("render, 创建vDOM结构所花费的时间")]),s._v(" "),e("li",[s._v("patch, 将vDOM结构渲染成实际的DOM元素所花费的时间")])]),s._v(" "),e("h3",{attrs:{id:"验证性能"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#验证性能"}},[s._v("#")]),s._v(" 验证性能")]),s._v(" "),e("p",[s._v("在此例中, "),e("a",{attrs:{href:"https://link.juejin.cn/?target=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fhello",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://localhost:8080/#/hello"),e("OutboundLink")],1),s._v(" 路由下, 只有两个组件:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("App.vue\n  Hello.vue\nApp.vue`是视图组件, 只有一个`<router-view/>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[e("code",[s._v("Hello.vue")]),s._v("只做一个简单的长列表(100000条件数据)展示, 代码如下:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<template>\n <div>\n   <span v-for="(item, idx) in users" :key="idx">\n     {{item.name}}\n   </span>\n </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      users: []\n    }\n  },\n  components: {\n\n  },\n  created () {\n    let users = Array.from({ length: 100000 }, (item, index) => ({ name: index }))\n    this.users = users\n  }\n}\n<\/script>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br")])]),e("p",[s._v("此时, "),e("code",[s._v("Hello.vue")]),s._v("组件"),e("code",[s._v("render")]),s._v("&"),e("code",[s._v("patch")]),s._v("的时间为:")]),s._v(" "),e("ul",[e("li",[s._v("render -> 924ms")]),s._v(" "),e("li",[s._v("patch  -> 1440ms")])]),s._v(" "),e("p",[e("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/9/11/16d20ca18c3c3a3e?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"images.png"}})]),s._v(" "),e("p",[s._v("修改"),e("code",[s._v("Hello.vue")]),s._v("的"),e("code",[s._v("created")]),s._v("钩子函数中的代码如下:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("created () {\n  let users = Array.from({ length: 100000 }, (item, index) => ({ name: index }))\n  this.users = Object.freeze(users)\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v('再次点击"reload"按钮, 重新测试性能.')]),s._v(" "),e("p",[e("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/9/11/16d20c9a6ebafed1?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"images.png"}})]),s._v(" "),e("p",[s._v("此时, "),e("code",[s._v("Hello.vue")]),s._v("组件"),e("code",[s._v("render")]),s._v("&"),e("code",[s._v("patch")]),s._v("的时间为:")]),s._v(" "),e("ul",[e("li",[s._v("render -> 397ms (上一次测试结果为: 924ms, 节省时间: 527ms, 性能提供约为 57%)")]),s._v(" "),e("li",[s._v("patch  -> 782ms (上一次测试结果为: 1440ms, 节省时间: 658ms, 性能提供约为: 45.7%)")])]),s._v(" "),e("p",[s._v("这里仅测试了一次, 但从结果来看, 增加"),e("code",[s._v("Object.freeze")]),s._v("冻结后, 整体性能会有明显提升.")]),s._v(" "),e("h2",{attrs:{id:"_3-不使用vuex创建store-vue-observable"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-不使用vuex创建store-vue-observable"}},[s._v("#")]),s._v(" 3. 不使用Vuex创建Store(Vue.observable)")]),s._v(" "),e("blockquote",[e("p",[s._v("2.6.0 新增")])]),s._v(" "),e("ul",[e("li",[s._v("参数：{Object} object")]),s._v(" "),e("li",[s._v("用法：让一个对象可响应。Vue 内部会用它来处理 data 函数返回的对象。")])]),s._v(" "),e("p",[s._v("返回的对象可以直接用于渲染函数和计算属性内，并且会在发生改变时触发相应的更新。也可以作为最小化的跨组件状态存储器，用于简单的场景：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const state = Vue.observable({ count: 0 })\n\nconst Demo = {\n  render(h) {\n    return h('button', {\n      on: { click: () => { state.count++ }}\n    }, `count is: ${state.count}`)\n  }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[s._v("我们可以利用这个API来应对一些简单的跨组件数据状态共享的情况.")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('// miniStore.js\n\nimport Vue from "vue";\n \nexport const miniStore = Vue.observable({ count: 0 });\n \nexport const actions = {\n  setCount(count) {\n    miniStore.count = count;\n  }\n}\n\nexport const getters = {\n  count: () => miniStore.count\n}\n\n// Demo.vue\n<template>\n  <div>\n    <p>count:{{count}}</p>\n    <button @click="add"> +1 </button>\n    <button @click="sub"> -1 </button>\n  </div>\n</template>\n \n<script>\nimport { actions, getters } from "./store";\nexport default {\n  name: "App",\n  computed: {\n    count() {\n      return getters.count;\n    }\n  },\n  methods: {\n    add: actions.setCount(this.count+1),\n    sub: actions.setCount(this.count-1)\n  }\n};\n<\/script>\n \n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br")])]),e("h2",{attrs:{id:"_4-属性-事件传递"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-属性-事件传递"}},[s._v("#")]),s._v(" 4. 属性&事件传递")]),s._v(" "),e("p",[s._v("在写"),e("code",[s._v("Vue")]),s._v("组件时, 经常会遇到:")]),s._v(" "),e("ul",[e("li",[s._v("组件层层传递"),e("code",[s._v("props")]),s._v("或"),e("code",[s._v("listerers")])]),s._v(" "),e("li",[s._v("动态绑定"),e("code",[s._v("props")]),s._v("或"),e("code",[s._v("listerers")])])]),s._v(" "),e("p",[s._v("有没有什么办法可以解决以上两种场景的问题呢?")]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("`v-bind`和`v-on`, 可以实现解决上述问题 :::")]),s._v(" "),e("p",[s._v("代码示例如下:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<template>\n  <Child v-bind="$props" v-on="$listeners"> </Child>\n</template>\n \n<script>\n  import Child from "./Child";\n  export default {\n    props: {\n      title: {\n        required: true,\n        type: String\n      }\n    }\n    components: {\n      Child\n    }\n  };\n<\/script>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br")])]),e("h2",{attrs:{id:"_5-监听函数的生命周期函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-监听函数的生命周期函数"}},[s._v("#")]),s._v(" 5. 监听函数的生命周期函数")]),s._v(" "),e("p",[s._v("有时, 需要在父组件监听子组件挂载后"),e("code",[s._v("mounted")]),s._v(", 做一些逻辑处理. 例如: 加载远端组件时, 想抓取组件从远端加载到挂载的耗时.")]),s._v(" "),e("p",[s._v("此时, 就不能用常规的写法, 在每个子组件中去"),e("code",[s._v("this.$emit")]),s._v("事件了. 有没有办法, 只需要在父组件中监听各子组件的生命周期钩子函数呢?")]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v('`@hook`可以监听到子组件的生命周期钩子函数(`created`, `updated`等等). 例如: `@hook:mounted="doSomething"` :::')]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('// Parent.vue\n<template>\n  <Child v-bind="$props" v-on="$listeners" @hook:mounted="doSomething"> </Child>\n</template>\n \n<script>\n  import Child from "./Child";\n  export default {\n    props: {\n      title: {\n        required: true,\n        type: String\n      }\n    }\n    components: {\n      Child\n    },\n    methods: {\n      doSomething(){\n        console.log("child component has mounted!");\n      }\n    }\n  };\n<\/script>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br")])]),e("h2",{attrs:{id:"_6-函数式组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-函数式组件"}},[s._v("#")]),s._v(" 6. 函数式组件")]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("函数式组件, 无状态，无法实例化，内部没有任何生命周期处理方法，非常轻量，因而渲染性能高，特别适合用来只依赖外部数据传递而变化的组件。 :::")]),s._v(" "),e("p",[s._v("写法如下：")]),s._v(" "),e("ul",[e("li",[s._v("在template标签里面标明"),e("code",[s._v("functional")])]),s._v(" "),e("li",[s._v("只接受props值")]),s._v(" "),e("li",[s._v("不需要script标签")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('\x3c!-- App.vue --\x3e\n<template>\n  <div>\n    <UserList :users="users" :click-handler="clickHandler.bind(this)"></UserList>\n  </div>\n</template>\n \n<script>\nimport UserList from "./UserList";\n \nexport default {\n  name: "App",\n  data: () => {\n    users: [\'james\', \'ian\']\n  }\n  components: { UserList },\n  methods: {\n    clickHandler(name){\n      console.log(`clicked: ${name}`);\n    }    \n  }\n};\n<\/script>\n// UserList.vue\n<template functional>\n  <div>\n    <p v-for="(name, idx) in props.users" @click="props.clickHandler(name)" :key="idx">\n      {{ name }}\n    </p>\n  </div>\n</template>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br")])]),e("h2",{attrs:{id:"_7-作用域插槽"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-作用域插槽"}},[s._v("#")]),s._v(" 7. 作用域插槽")]),s._v(" "),e("blockquote",[e("p",[s._v("在 2.6.0 中，Vue为具名插槽和作用域插槽引入了一个新的统一的语法 (即 v-slot 指令)。它取代了 slot 和 slot-scope 这两个目前已被废弃但未被移除且仍在文档中的特性。新语法的由来可查阅这份 RFC。")])]),s._v(" "),e("h3",{attrs:{id:"简单示例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#简单示例"}},[s._v("#")]),s._v(" 简单示例")]),s._v(" "),e("p",[s._v("如何使用作用域插槽呢? 请先看如下示例:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<template>\n  <List :items="items">\n    <template slot-scope="{ filteredItems }">\n      <p v-for="item in filteredItems" :key="item">{{ item }}</p>\n    </template>\n  </List>\n</template>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("使用"),e("code",[s._v("v-slot")]),s._v(", 可以直接在组件标签上写入该插槽的"),e("code",[s._v("scope")]),s._v(".")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<template>\n  <List v-slot="{ filteredItems }" :items="items">\n    <p v-for="item in filteredItems" :key="item">{{ item }}</p>\n  </List>\n</template>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("`v-slot`只能在组件或`template`标签上使用, 不能使用在普通原生的HTML标签上. :::")]),s._v(" "),e("p",[s._v("这样使得代码可读性增强, 特别是在一些很难说明模板变量来源的场景中.")]),s._v(" "),e("h3",{attrs:{id:"v-slot-高级使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v-slot-高级使用"}},[s._v("#")]),s._v(" v-slot 高级使用")]),s._v(" "),e("p",[e("code",[s._v("v-slot")]),s._v("指令还引入了一种方法来组合使用"),e("code",[s._v("slot")]),s._v("&"),e("code",[s._v("scoped-slot")]),s._v(', 但需要用":"来分隔.')]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<template>\n  <Promised :promise="usersPromise">\n    <p slot="pending">Loading...</p>\n\n    <ul slot-scope="users">\n      <li v-for="user in users">{{ user.name }}</li>\n    </ul>\n\n    <p slot="rejected" slot-scope="error">Error: {{ error.message }}</p>\n  </Promised>\n</template>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("p",[s._v("使用"),e("code",[s._v("v-slot")]),s._v("重写:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<template>\n  <Promised :promise="usersPromise">\n    <template v-slot:pending>\n      <p>Loading...</p>\n    </template>\n\n    <template v-slot="users">\n      <ul>\n        <li v-for="user in users">{{ user.name }}</li>\n      </ul>\n    </template>\n\n    <template v-slot:rejected="error">\n      <p>Error: {{ error.message }}</p>\n    </template>\n  </Promised>\n</template>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br")])]),e("p",[e("code",[s._v("v-slot")]),s._v("还可以简写为 "),e("code",[s._v("#")]),s._v(" , 重写上面的例子:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<template>\n  <Promised :promise="usersPromise">\n    <template #pending>\n      <p>Loading...</p>\n    </template>\n\n    <template #default="users">\n      <ul>\n        <li v-for="user in users">{{ user.name }}</li>\n      </ul>\n    </template>\n\n    <template #rejected="error">\n      <p>Error: {{ error.message }}</p>\n    </template>\n  </Promised>\n</template>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br")])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("注意, `v-slot`的简写是 `#default` :::")]),s._v(" "),e("h2",{attrs:{id:"_8-watch"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-watch"}},[s._v("#")]),s._v(" 8. watch")]),s._v(" "),e("p",[s._v("虽然"),e("code",[s._v("Vue.js")]),s._v("为我们提供了有用的"),e("code",[s._v("computed")]),s._v(", 但在某些场景下, 仍然还是需要使用到"),e("code",[s._v("watch")]),s._v(".")]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("默认情况下, `watch`只在被监听的属性值发生变化时执行. :::")]),s._v(" "),e("p",[s._v("例如:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('export default {\n  data: () => ({\n    dog: ""\n  }),\n  watch: {\n    dog(newVal, oldVal) {\n      console.log(`Dog changed: ${newVal}`);\n    }\n  }\n};\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("如上代码所示, 只有当"),e("code",[s._v("dog")]),s._v("的值有发生改变时, "),e("code",[s._v("watch")]),s._v("中的"),e("code",[s._v("dog")]),s._v("函数才会执行.")]),s._v(" "),e("p",[s._v("但是, 在某些情况下, 你可能需要在创建组件后立即运行监听程序. 当然, 你可以将逻辑迁移至"),e("code",[s._v("methods")]),s._v("中, 然后从"),e("code",[s._v("watch")]),s._v("和"),e("code",[s._v("created")]),s._v("钩子函数中分别调用它, 但有没有更简单一点的办法呢?")]),s._v(" "),e("p",[s._v("你可以在使用"),e("code",[s._v("watch")]),s._v("时, 使用"),e("code",[s._v("immediate: true")]),s._v("选项, 这样它就会在组件创建时立即执行.")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('export default {\n  data: () => ({\n    dog: ""\n  }),\n  watch: {\n    dog: {\n      handler(newVal, oldVal) {\n        console.log(`Dog changed: ${newVal}`);\n      },\n      immediate: true\n    }\n  }\n};\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("h2",{attrs:{id:"_9-图片懒加载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-图片懒加载"}},[s._v("#")]),s._v(" 9. 图片懒加载")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Falexjoverm%2Fv-lazy-image",target:"_blank",rel:"noopener noreferrer"}},[s._v("v-lazy-image"),e("OutboundLink")],1),s._v("图片懒加载组件.")]),s._v(" "),e("p",[s._v("安装: "),e("code",[s._v("npm install v-lazy-image")])]),s._v(" "),e("p",[s._v("使用:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('// main.js\nimport Vue from "vue";\nimport { VLazyImagePlugin } from "v-lazy-image";\n\nVue.use(VLazyImagePlugin);\n<template>\n  <v-lazy-image src="http://lorempixel.com/400/200/" />\n</template>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("你也可以使用渐进式图像加载方式来加载图片, 通过设置"),e("code",[s._v("src-placeholder")]),s._v("先加载缩略图, 同时使用CSS应用自己的过滤效果.")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<template>\n  <v-lazy-image\n    src="http://demo.com/demo.jpeg"\n    src-placeholder="http://demo.com/min-demo.jpeg"\n  />\n</template>\n\n<style scoped>\n  .v-lazy-image {\n    filter: blur(10px);\n    transition: filter 0.7s;\n  }\n  .v-lazy-image-loaded {\n    filter: blur(0);\n  }\n</style>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])]),e("h2",{attrs:{id:"_10-sync-修饰符"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_10-sync-修饰符"}},[s._v("#")]),s._v(" 10. .sync 修饰符")]),s._v(" "),e("blockquote",[e("p",[s._v("2.3.0+ 新增")])]),s._v(" "),e("p",[s._v("在有些情况下，我们可能需要对一个 "),e("code",[s._v("prop")]),s._v(" 进行“双向绑定”。 不幸的是，真正的双向绑定会带来维护上的问题，因为子组件可以修改父组件，且在父组件和子组件都没有明显的改动来源。")]),s._v(" "),e("p",[s._v("这也是为什么我们推荐以 "),e("strong",[s._v("update:myPropName")]),s._v(" 的模式触发事件取而代之。")]),s._v(" "),e("p",[s._v("举个例子，在一个包含 "),e("code",[s._v("title")]),s._v("的 prop属性的组件中，我们可以用以下方法表达对其赋新值的意图：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("this.$emit('update:title', newTitle)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("然后父组件可以监听那个事件并根据需要更新一个本地的数据属性。例如：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<text-document\n  v-bind:title="doc.title"\n  v-on:update:title="doc.title = $event"\n></text-document>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("为了方便起见，我们为这种模式提供一个缩写，即 "),e("code",[s._v(".sync")]),s._v(" 修饰符：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<text-document v-bind:title.sync="doc.title"></text-document>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"custom-block danger"},[e("p",{staticClass:"custom-block-title"},[s._v("带有 `.sync` 修饰符的 `v-bind` 不能和表达式一起使用.")]),s._v(" "),e("p",[s._v("例如: v-bind:title.sync=”doc.title + ‘!’” 是无效的。")]),s._v(" "),e("p",[s._v("取而代之的是，你只能提供你想要绑定的属性名，类似 v-model。 :::")]),s._v(" "),e("p",[s._v("当我们用一个对象同时设置多个 "),e("code",[s._v("prop")]),s._v(" 的时候，也可以将这个 "),e("code",[s._v(".sync")]),s._v(" 修饰符和 "),e("code",[s._v("v-bind")]),s._v(" 配合使用：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<text-document v-bind.sync="doc"></text-document>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("这样会把 doc 对象中的每一个属性 (如 title) 都作为一个独立的 prop 传进去，然后各自添加用于更新的 "),e("strong",[s._v("v-on")]),s._v(" 监听器。")]),s._v(" "),e("h3",{attrs:{id:"注意"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#注意"}},[s._v("#")]),s._v(" 注意")]),s._v(" "),e("p",[s._v("将 "),e("strong",[s._v("v-bind.sync")]),s._v(" 用在一个字面量的对象上.")]),s._v(" "),e("p",[s._v("例如: "),e("code",[s._v("v-bind.sync=”{ title: doc.title }”")]),s._v("，是无法正常工作的.")]),s._v(" "),e("p",[s._v("因为在解析一个像这样的复杂表达式的时候，有很多边缘情况需要考虑。")]),s._v(" "),e("h2",{attrs:{id:"_11-provide-inject"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_11-provide-inject"}},[s._v("#")]),s._v(" 11. provide / inject")]),s._v(" "),e("blockquote",[e("p",[s._v("2.2.0 新增")])]),s._v(" "),e("p",[s._v("类型：")]),s._v(" "),e("ul",[e("li",[s._v("provide：Object | () => Object")]),s._v(" "),e("li",[s._v("inject：Array | { [key: string]: string | Symbol | Object }")])]),s._v(" "),e("blockquote",[e("p",[s._v("注意: provide 和 inject 主要为高阶插件/组件库提供用例。并不推荐直接用于应用程序代码中。")])]),s._v(" "),e("p",[s._v("这对选项需要一起使用，以允许一个祖先组件向其所有子孙后代注入一个依赖，不论组件层次有多深，并在起上下游关系成立的时间里始终生效。如果你熟悉 React，这与 React 的上下文特性很相似。")]),s._v(" "),e("p",[s._v("provide 选项应该是一个对象或返回一个对象的函数。该对象包含可注入其子孙的属性。在该对象中你可以使用 ES2015 Symbols 作为 key，但是只在原生支持 Symbol 和 Reflect.ownKeys 的环境下可工作。")]),s._v(" "),e("p",[s._v("inject 选项应该是：")]),s._v(" "),e("ul",[e("li",[s._v("一个字符串数组，或")]),s._v(" "),e("li",[s._v("一个对象，对象的 key 是本地的绑定名，value 是：\n"),e("ul",[e("li",[s._v("在可用的注入内容中搜索用的 key (字符串或 Symbol)，或")]),s._v(" "),e("li",[s._v("一个对象，该对象的：\n"),e("ul",[e("li",[s._v("from 属性是在可用的注入内容中搜索用的 key (字符串或 Symbol)")]),s._v(" "),e("li",[s._v("default 属性是降级情况下使用的 value")])])])])])]),s._v(" "),e("blockquote",[e("p",[s._v("提示: provide 和 inject 绑定并不是可响应的。这是刻意为之的。然而，如果你传入了一个可监听的对象，那么其对象的属性还是可响应的。")])]),s._v(" "),e("p",[s._v("示例：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// 父级组件提供 'foo'\nvar Provider = {\n  provide: {\n    foo: 'bar'\n  },\n  // ...\n}\n\n// 子组件注入 'foo'\nvar Child = {\n  inject: ['foo'],\n  created () {\n    console.log(this.foo) // => \"bar\"\n  }\n  // ...\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])]),e("p",[s._v("利用 ES2015 Symbols、函数 provide 和对象 inject：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const s = Symbol()\n\nconst Provider = {\n  provide () {\n    return {\n      [s]: 'foo'\n    }\n  }\n}\n\nconst Child = {\n  inject: { s },\n  // ...\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("p",[s._v("在 2.5.0+ 的注入可以通过设置默认值使其变成可选项：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const Child = {\n  inject: {\n    foo: { default: 'foo' }\n  }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("如果它需要从一个不同名字的属性注入，则使用 from 来表示其源属性：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const Child = {\n  inject: {\n    foo: {\n      from: 'bar',\n      default: 'foo'\n    }\n  }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("与 prop 的默认值类似，你需要对非原始值使用一个工厂方法：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const Child = {\n  inject: {\n    foo: {\n      from: 'bar',\n      default: () => [1, 2, 3]\n    }\n  }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h2",{attrs:{id:"_12-调试-vue-template"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_12-调试-vue-template"}},[s._v("#")]),s._v(" 12. 调试 Vue template")]),s._v(" "),e("p",[s._v("在Vue开发过程中, 经常会遇到template模板渲染时JavaScript变量出错的问题, 此时也许你会通过"),e("code",[s._v("console.log")]),s._v("来进行调试. 例如:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("<template>\n  <h1>\n    {{ log(message) }}\n  </h1>\n</template>\n<script>\nmethods: {\n  log(message) {\n    console.log(message);\n  }\n}\n<\/script>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("p",[s._v("每次调试模板渲染时, 都类似重复这样写, 可能会很无聊, 有没有更好的办法呢?")]),s._v(" "),e("p",[s._v("在"),e("code",[s._v("Vue.prototype")]),s._v("原型链上添加一个自定义的方法.")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// main.js\nVue.prototype.$log = window.console.log;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("至止, 我们可以在每个组件的模板中使用"),e("code",[s._v("$log")]),s._v(", 如果我们不想影响模板的渲染, 也可以:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("<h1>\n  {{ log(message) || message }}\n</h1>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("这样是不是很方便的调试模板了?")]),s._v(" "),e("p",[s._v("那延展一下, 有没有办法增加一个断点, 以调试模板渲染时, 查看相关联的变量? 我们在使用模板时放入一个"),e("code",[s._v("debugger")]),s._v(".")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("<h1>\n  {{ debugger }}\n</h1>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("你会发现, 组件根本就没有编译模板. 有没有办法呢?")]),s._v(" "),e("p",[s._v("我们可以尝试在模板中添加一个自执行的函数, 例如:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("<h1>\n  {{ (function(){degugger;}) || message }}\n</h1>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("此时, 我们将可以看到断点定位到了模板的渲染函数中了.")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/9/11/16d20ca47b999604?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"images.png"}})]),s._v(" "),e("p",[s._v("此时的"),e("code",[s._v("_vm")]),s._v(", 就是我们组件的实例对象.")]),s._v(" "),e("p",[s._v("检查编译的模板虽然很有意思, 但由于某些原因, 变量在被我们放在"),e("code",[s._v("debugger")]),s._v("后, 在chrome devtools的函数范围内变得不可用.")]),s._v(" "),e("p",[s._v("修改下写法:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("<h1>\n  {{ (function(){degugger; message}) || message }}\n</h1>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("此时, 你就可以随心所欲了.")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/9/11/16d20c9ac17162bc?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"images.png"}})]),s._v(" "),e("h2",{attrs:{id:"_13-vue组件局部样式-scoped"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_13-vue组件局部样式-scoped"}},[s._v("#")]),s._v(" 13. Vue组件局部样式 scoped")]),s._v(" "),e("p",[s._v("Vue中style标签的scoped属性表示它的样式只作用于当前模块，是"),e("strong",[s._v("样式私有化")]),s._v(", 设计的初衷就是让样式变得不可修改.")]),s._v(" "),e("p",[s._v("渲染的规则/原理：")]),s._v(" "),e("ul",[e("li",[s._v("给HTML的DOM节点添加一个 不重复的data属性 来表示 唯一性")]),s._v(" "),e("li",[s._v("在对应的 CSS选择器 末尾添加一个当前组件的 data属性选择器来私有化样式，如：.demo[data-v-2311c06a]{}")]),s._v(" "),e("li",[s._v("若组件内部包含其他组件，只会给其他组件的最外层标签加上当前组件的 data-v 属性")])]),s._v(" "),e("p",[s._v("例如, 如下代码所示:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<template>\n  <div class="demo">\n    <span class="content">\n      Vue.js scoped\n    </span>\n  </div>\n</template>\n\n<style lang="less" scoped>\n  .demo{\n    font-size: 14px;\n    .content{\n      color: red;\n    }\n  }\n</style>\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br")])]),e("p",[s._v("浏览器渲染后的代码：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<div data-v-fed36922>\n  Vue.js scoped\n</div>\n<style type="text/css">\n.demo[data-v-039c5b43] {\n  font-size: 14px;\n}\n.demo .content[data-v-039c5b43] {\n  color: red;\n}\n</style>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("注意 添加scoped属性后, 父组件无法修改子组件的样式. :::")]),s._v(" "),e("h2",{attrs:{id:"_14-vue组件样式之-deep选择器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_14-vue组件样式之-deep选择器"}},[s._v("#")]),s._v(" 14. Vue组件样式之 deep选择器")]),s._v(" "),e("p",[s._v("如上例中, 若想在父组件中修改子组件的样式, 怎么办呢?")]),s._v(" "),e("ul",[e("li",[s._v("1.采用全局属性和局部属性混合的方式")]),s._v(" "),e("li",[s._v("2.每个组件在最外层添加一个唯一的class区分不同的组件")]),s._v(" "),e("li",[s._v("3.使用深层选择器deep")])]),s._v(" "),e("p",[s._v("这里我们主要讲解使用"),e("code",[s._v("deep")]),s._v("修改子组件的样式. 将上例的代码修改为:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<template>\n  <div class="demo">\n    <span class="content">\n      Vue.js scoped\n    </span>\n  </div>\n</template>\n\n<style lang="less" scoped>\n  .demo{\n    font-size: 14px;\n  }\n  .demo /deep/ .content{\n    color: blue;\n  }\n</style>\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br")])]),e("p",[s._v("最终style编译后的输出为:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<style type="text/css">\n.demo[data-v-039c5b43] {\n  font-size: 14px;\n}\n.demo[data-v-039c5b43] .content {\n  color: blue;\n}\n</style>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("从编译可以看出, 就是"),e("code",[s._v(".content")]),s._v("后有无添加CSS属性"),e("code",[s._v("data-v-xxx")]),s._v("的区别, 属性CSS选择器权重问题的同学, 对此应该立即明白了吧!")]),s._v(" "),e("h2",{attrs:{id:"_15-vue组件局部样式-modules"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_15-vue组件局部样式-modules"}},[s._v("#")]),s._v(" 15. Vue组件局部样式 Modules")]),s._v(" "),e("p",[s._v("CSS Modules 是一个流行的，用于模块化和组合 CSS 的系统。"),e("code",[s._v("vue-loader")]),s._v(" 提供了与 CSS Modules 的一流集成，可以作为模拟 "),e("code",[s._v("scoped CSS")]),s._v(" 的替代方案。")]),s._v(" "),e("h3",{attrs:{id:"用法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#用法"}},[s._v("#")]),s._v(" 用法")]),s._v(" "),e("p",[s._v("首先，CSS Modules 必须通过向 "),e("code",[s._v("css-loader")]),s._v(" 传入 "),e("code",[s._v("modules: true")]),s._v(" 来开启：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// webpack.config.js\n{\n  module: {\n    rules: [\n      // ... 其它规则省略\n      {\n        test: /\\.css$/,\n        use: [\n          'vue-style-loader',\n          {\n            loader: 'css-loader',\n            options: {\n              // 开启 CSS Modules\n              modules: true,\n              // 自定义生成的类名\n              localIdentName: '[local]_[hash:base64:8]'\n            }\n          }\n        ]\n      }\n    ]\n  }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br")])]),e("p",[s._v("然后在你的 "),e("code",[s._v("<style>")]),s._v(" 上添加 module 特性：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("<style module>\n.red {\n  color: red;\n}\n.bold {\n  font-weight: bold;\n}\n</style>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("这个 module 特性指引 Vue Loader 作为名为 $style 的计算属性，向组件注入 CSS Modules 局部对象。然后你就可以在模板中通过一个动态类绑定来使用它了：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<template>\n  <p :class="$style.red">\n    This should be red\n  </p>\n</template>\n复制代码\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("因为这是一个计算属性，所以它也支持 "),e("code",[s._v(":class")]),s._v(" 的对象/数组语法：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<template>\n  <div>\n    <p :class="{ [$style.red]: isRed }">\n      Am I red?\n    </p>\n    <p :class="[$style.red, $style.bold]">\n      Red and bold\n    </p>\n  </div>\n</template>\n复制代码\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("p",[s._v("你也可以通过 JavaScript 访问到它：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<script>\nexport default {\n  created () {\n    console.log(this.$style.red)\n    // -> "red_1VyoJ-uZ"\n    // 一个基于文件名和类名生成的标识符\n  }\n}\n<\/script>\n复制代码\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("你可以查阅 CSS Modules 规范了解更多细节，诸如 "),e("code",[s._v("global exceptions")]),s._v(" 和 "),e("code",[s._v("composition")]),s._v(" 等。")]),s._v(" "),e("h3",{attrs:{id:"可选用法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#可选用法"}},[s._v("#")]),s._v(" 可选用法")]),s._v(" "),e("p",[s._v("如果你只想在某些 Vue 组件中使用 CSS Modules，你可以使用 oneOf 规则并在 resourceQuery 字符串中检查 module 字符串：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// webpack.config.js -> module.rules\n{\n  test: /\\.css$/,\n  oneOf: [\n    // 这里匹配 `<style module>`\n    {\n      resourceQuery: /module/,\n      use: [\n        'vue-style-loader',\n        {\n          loader: 'css-loader',\n          options: {\n            modules: true,\n            localIdentName: '[local]_[hash:base64:5]'\n          }\n        }\n      ]\n    },\n    // 这里匹配普通的 `<style>` 或 `<style scoped>`\n    {\n      use: [\n        'vue-style-loader',\n        'css-loader'\n      ]\n    }\n  ]\n}\n复制代码\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br")])]),e("h3",{attrs:{id:"和预处理器配合使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#和预处理器配合使用"}},[s._v("#")]),s._v(" 和预处理器配合使用")]),s._v(" "),e("p",[s._v("CSS Modules 可以与其它预处理器一起使用：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// webpack.config.js -> module.rules\n{\n  test: /\\.scss$/,\n  use: [\n    'vue-style-loader',\n    {\n      loader: 'css-loader',\n      options: { modules: true }\n    },\n    'sass-loader'\n  ]\n}\n复制代码\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("h3",{attrs:{id:"自定义的注入名称"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#自定义的注入名称"}},[s._v("#")]),s._v(" 自定义的注入名称")]),s._v(" "),e("p",[s._v("在 .vue 中你可以定义不止一个 "),e("code",[s._v("<style>")]),s._v("，为了避免被覆盖，你可以通过设置 module 属性来为它们定义注入后计算属性的名称。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<style module="a">\n  /* 注入标识符 a */\n</style>\n\n<style module="b">\n  /* 注入标识符 b */\n</style>\n复制代码\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h2",{attrs:{id:"_16-始终验证props"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_16-始终验证props"}},[s._v("#")]),s._v(" 16. 始终验证Props")]),s._v(" "),e("p",[s._v("验证Props是Vue中的基本做法. 可能你知道如何做一些原始数据类型的验证, 如: String, Number等, 当然, 你也可以自定义验证函数, 例如:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("props: {\n  name: {\n    type: String,\n    required: true,\n    validator: function(value) {\n      return [\n        '张三',\n        '李四',\n        '王五'\n      ].indexOf(value) !== -1\n    }\n  }\n}\n复制代码\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("h2",{attrs:{id:"_17-自定义v-model"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_17-自定义v-model"}},[s._v("#")]),s._v(" 17. 自定义v-model")]),s._v(" "),e("p",[s._v("默认情况下, "),e("code",[s._v("v-model")]),s._v("是"),e("code",[s._v("@input")]),s._v("事件侦听器和"),e("code",[s._v(":value")]),s._v("属性的语法糖. 但是, 你也可以在你的Vue组件中指定一个模型属性来定义什么事件和value属性.")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("export defaut {\n  model: {\n    event: 'change',\n    prop: 'checked'\n  }\n}\n复制代码\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h2",{attrs:{id:"_18-动态指令参数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_18-动态指令参数"}},[s._v("#")]),s._v(" 18. 动态指令参数")]),s._v(" "),e("blockquote",[e("p",[s._v("2.6+新增 Vue 2.6可以将指令参数动态传递给组件. 例如, 你有一个按钮组件, 并在某些情况下需要监听单击事件, 某些情况下需要监听双击事件, 可以考虑这么写:")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("<template>\n  <div>\n    <div>hellojames</div>\n    <button v-on:[eventType]=\"eventHandler($event)\">xxx</button>\n  </div>\n</template>\n<script>\nexport default {\n  data () {\n    return {\n      someCondition: 1\n    }\n  },\n  computed: {\n    eventType () {\n      return this.someCondition ? 'click' : 'dblclick'\n    }\n  },\n  methods: {\n    eventHandler ($event) {\n      // todo something\n      window.console.log($event)\n    }\n  }\n}\n<\/script>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br")])])])])])])])])])])])])}),[],!1,null,null,null);n.default=t.exports}}]);